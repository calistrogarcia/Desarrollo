<?xml version="1.0" encoding="UTF-8"?>
<!--
To change this license header, choose License Headers in Project Properties.
To change this template file, choose Tools | Templates
and open the template in the editor.
-->
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"      
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:p="http://primefaces.org/ui"
      xmlns:ui="http://java.sun.com/jsf/facelets">
    <h:head>   
        <h:outputScript library="js" name="scrits.js"></h:outputScript>


    </h:head>
    <h:body>
        <ui:composition template="/WEB-INF/faces/templates/TemplatePagina.xhtml">
            <ui:define name="contenido"><!---Agregando Etiqueta de Titulo-->

                <p:tabView id="CertificadoTabView" dynamic="true" orientation="top" activeIndex="#{Beans_DefensaCivil_Certificado.activeTabIndex}" style="text-align: left" >  


                    <p:tab id="Tab_Defensa_Civil" title="Expediente Ipse" titletip="Buscar Certificado" titleStyleClass="tamaño_fuente_tab" >
                        <h:form  id="Form_expediente_defensa_civil" class="border_titulo1"  styleClass="tamaño_fuente">    
                            <p:growl globalOnly="true"  id="Growl_Mensaje" sticky="false"  showDetail="true"  />    
                            <p:panel id="Panel_Expedientes_defensa_Civil" header="#{msg.LabelCertificado}"  style=" text-align:  left"  >         

                                <fieldset>
                                    <h:panelGrid columns="1"   >
                                        <div id="day" style="tamaño_fuente" >
                                            Usuario
                                            <p:clock  pattern="dd MMMM yy HH:mm:ss" mode="client"  />                        
                                        </div>
                                    </h:panelGrid> 
                                    <center>
                                        <h:panelGrid columns="3"  >

                                            <img  src="resources/imagenes/agregar.png" style="text-align: center"  height="20px"/>
                                            <h:outputText value="#{msg.LabelIngreseExpediente}"  styleClass="tamaño_fuente" />                                                                            
                                            <h:panelGroup>
                                                <p:inputMask id="buscar_expediente"  
                                                             mask="99999-99-9999"                                            
                                                             size="15" 
                                                             value="#{Beans_DefensaCivil_Certificado.objBuscarCertificado.nro_expediente}" >                                                   
                                                </p:inputMask>
                                                <h:message for="buscar_expedientes" showDetail="true" showSummary="true"/>                                                     
                                            </h:panelGroup>
                                        </h:panelGrid> 

                                    </center>
                                    <h:panelGrid columns="4"  cellpadding="3"  cellspacing="3" style="text-align: center;" width="17%"  >

                                        <p:commandButton id="saveBtnINI" icon="ui-icon-document" actionListener="#{Beans_DefensaCivil_Certificado.doiniciarBusquedaCertificado()}"  
                                                         value="#{msg.labelNuevo}"  async="true" update="Panel_Expedientes_defensa_Civil"  />

                                        <p:commandButton id="saveBtn" icon="ui-icon-folder-open" actionListener="#{Beans_DefensaCivil_Certificado.doBuscarCertificado()}"  
                                                         value="#{msg.btnConsultar}"  async="true" update="Panel_Expedientes_defensa_Civil" />  

                                        <p:commandButton id="Actualizar" icon="ui-icon-gear" actionListener="#{Beans_DefensaCivil_Certificado.ActuaizarDatos(actualizardatos)}"  
                                                         value="#{msg.BtnActualizarDatos}"  async="true" update="Panel_Expedientes_defensa_Civil"/> 

                                    </h:panelGrid>
                                </fieldset>
                                <h:panelGrid columns="3" cellpadding="2"  cellspacing="2"  width="10%">

                                    <h:panelGrid columns="2">
                                        <img src="resources/imagenes/printer.png"/>
                                        <h:commandLink id="reporte"  value="Imprimir" actionListener="#{BeanExpediente_Reporte.verReporteDefensaCivilCertificado()}" title="Certificados"/>
                                    </h:panelGrid> 

                                    <h:commandLink >
                                        <p:graphicImage url="resources/imagenes/xls.png"/>
                                        <p:dataExporter type="xls" target="resListadoCertificado" fileName="Informacion Certificado" />           
                                    </h:commandLink>

                                </h:panelGrid> 

                                <p:blockUI block="Panel_Expedientes_defensa_Civil" trigger="saveBtn">   Buscando... <br />
                                    <p:graphicImage value="resources/imagenes/cargando1.gif" />   
                                </p:blockUI>
                                <center>
                                    <h:panelGrid columns="2" >
                                        <h:outputText styleClass="etiqueta_resultBusq" value="#{msg.labelCantidad}"/>
                                        <h:outputText styleClass="etiqueta_resultBusq" value="#{Beans_DefensaCivil_Certificado.arrBusCertificado.size()}"/>               
                                    </h:panelGrid> 

                                    <h:panelGrid columns="1"   cellpadding="0"  cellspacing="0" 
                                                 border="0"  styleClass="width-table"> 

                                        <p:dataTable id="resListadoCertificado" value="#{Beans_DefensaCivil_Certificado.arrBusCertificado}"  
                                                     var="listCertificado"  styleClass="order-table" paginator="true" lazy="true"
                                                     rows="5"  rowsPerPageTemplate="5,10,15,20,25,30,50" 
                                                     paginatorPosition="both" paginatorAlwaysVisible="true"
                                                     style="tamaño_fuente"
                                                     rowStyleClass="#{listCertificado.objExpediente.estado_expediente eq 'TRAMITE'  ? 'cabeceraTabla'   : null} #{listCertificado.objExpediente.estado_expediente eq 'RESUELTO'  ? 'cabeceraTabla_1'   : null}"

                                                     >


                                            <p:column style="width:4%;text-align: center">
                                                <f:facet name="header">
                                                    <h:outputText value="#{msg.LabelExpedienteId}" />
                                                </f:facet>
                                                <h:outputText  value="#{listCertificado.objUpload.expediente_id}"/>
                                            </p:column>  


                                            <p:column rendered="false" >
                                                <f:facet name="header">
                                                    <h:outputText value="#{msg.labelDni}" />
                                                </f:facet>
                                                <h:outputText  value="#{listCertificado.numero_identificacion}"/>
                                            </p:column>  

                                            <p:column style="width:4%;text-align: center">
                                                <f:facet name="header">
                                                    <h:outputText value="#{msg.LabelCodigoContribuyente}" />
                                                </f:facet>
                                                <h:outputText  value="#{listCertificado.objPersona.codigo_contribuyente}"/>
                                            </p:column>   

                                            <p:column style="width:10%;text-align: center">
                                                <f:facet name="header">
                                                    <h:outputText value="#{msg.LabelNombres}" />
                                                </f:facet>
                                                <h:outputText  value="#{listCertificado.objPersona.nombres_apellidos}" />
                                            </p:column>  



                                            <p:column filterBy="#{listCertificado.nro_expediente}" filterMatchMode="contains" style="width:9%;text-align: center">
                                                <f:facet name="header">
                                                    <h:outputText value="#{msg.LabelNumeroExpediente}" />
                                                </f:facet>
                                                <h:outputText value="#{listCertificado.nro_expediente}"/>
                                            </p:column> 

                                            <p:column style="width:20%;text-align: left">
                                                <f:facet name="header">
                                                    <h:outputText value="#{msg.labelAsunto}" style="text-align: center"/>
                                                </f:facet>
                                                <h:outputText  value="#{listCertificado.asunto}"/>
                                            </p:column>  

                                            <p:column style="width:6%;text-align: center">
                                                <f:facet name="header">
                                                    <h:outputText value="#{msg.labelAreaDeclarada}" style="text-align: center"/>
                                                </f:facet>
                                                <h:outputText  value="#{listCertificado.area_declarada}"/>
                                            </p:column>  


                                            <p:column  >
                                                <f:facet name="header">
                                                    <h:outputText value="#{msg.labelAreaFinal}" />
                                                </f:facet>
                                                <h:outputText  value="#{listCertificado.area}"/>
                                            </p:column>  

                                            <p:column rendered="false" >
                                                <f:facet name="header">
                                                    <h:outputText value="#{msg.labelRazonSocial}" />
                                                </f:facet>
                                                <h:outputText  value="#{listCertificado.razon_social}"/>

                                            </p:column>    

                                            <p:column rendered="false" >
                                                <f:facet name="header">
                                                    <h:outputText value="#{msg.labelRepresentanteLegal}" />
                                                </f:facet>
                                                <h:outputText  value="#{listCertificado.representante_legal}"/>

                                            </p:column>  

                                            <p:column rendered="false" >
                                                <f:facet name="header">
                                                    <h:outputText value="#{msg.LabelDireccion}" />
                                                </f:facet>
                                                <h:outputText  value="#{listCertificado.direccion}"/>

                                            </p:column>  


                                            <p:column rendered="false" >
                                                <f:facet name="header">
                                                    <h:outputText value="#{msg.LabelNombreInspector}" />
                                                </f:facet>
                                                <h:outputText  value="#{listCertificado.nombre_inspector}"/>

                                            </p:column>  

                                            <p:column rendered="false" >
                                                <f:facet name="header">
                                                    <h:outputText value="#{msg.labelaforo}" />
                                                </f:facet>
                                                <h:outputText  value="#{listCertificado.aforo}"/>

                                            </p:column> 

                                            <p:column  rendered="false" >
                                                <f:facet name="header">
                                                    <h:outputText value="#{msg.LabelGiro}" />
                                                </f:facet>
                                                <h:outputText  value="#{listCertificado.objgiros.codigo_giro}"/>

                                            </p:column> 

                                            <p:column rendered="false" >
                                                <f:facet name="header">
                                                    <h:outputText value="#{msg.LabelTipoLicencia}" />
                                                </f:facet>
                                                <h:outputText  value="#{listCertificado.id_tipo_licencia}"/>

                                            </p:column>  


                                            <p:column  >
                                                <f:facet name="header">
                                                    <h:outputText value="#{msg.LabelTipoLicencia}" />
                                                </f:facet>
                                                <h:outputText  value="#{listCertificado.descripcion_tipo_licencia}"/>

                                            </p:column>  


                                            <p:column  rendered="false" >
                                                <f:facet name="header">
                                                    <h:outputText value="#{msg.LabelNumeroIdentidad}" />
                                                </f:facet>
                                                <h:outputText  value="#{listCertificado.numero_identificacion}"/>

                                            </p:column>      


                                            <p:column  rendered="false" >
                                                <f:facet name="header">
                                                    <h:outputText value="#{msg.labelEstadoFiscalizacion}" />
                                                </f:facet>
                                                <h:outputText  value="#{listCertificado.estado_fiscalizacion}"/>

                                            </p:column> 

                                            <p:column  rendered="false" >
                                                <f:facet name="header">
                                                    <h:outputText value="#{msg.LabelObservaciones}" />
                                                </f:facet>
                                                <h:outputText  value="#{listCertificado.observaciones_seguridad}"/>

                                            </p:column>  


                                            <p:column  rendered="false" >
                                                <f:facet name="header">
                                                    <h:outputText value="#{msg.LabelResultado}" />
                                                </f:facet>
                                                <h:outputText  value="#{listCertificado.resultado}"/>

                                            </p:column>  


                                            <p:column  rendered="false" >
                                                <f:facet name="header">
                                                    <h:outputText value="#{msg.LabelAnotaciones}" />
                                                </f:facet>
                                                <h:outputText  value="#{listCertificado.anotaciones}"/>

                                            </p:column>  

                                            <p:column   >
                                                <f:facet name="header">
                                                    <h:outputText value="#{msg.labelEstado}" />
                                                </f:facet>
                                                <h:outputText  value="#{listCertificado.objExpediente.estado_expediente}"/>

                                            </p:column>

                                            <p:column rendered="false" >
                                                <f:facet name="header">
                                                    <h:outputText value="#{msg.LabelDireccion}" />
                                                </f:facet>
                                                <h:outputText  value="#{listCertificado.direccion_verificada}"/>

                                            </p:column>


                                            <p:column rendered="false" >
                                                <f:facet name="header">
                                                    <h:outputText value="#{msg.LabelAreaVerificada}" />
                                                </f:facet>
                                                <h:outputText  value="#{listCertificado.area_verificada}"/>

                                            </p:column>



                                            <p:column exportable="false" >

                                                <f:facet name="header">
                                                    <center><h:outputText value="Editar"/></center>
                                                </f:facet>

                                                <img  src="resources/imagenes/editar.png" style="text-align: center"  height="20"/>

                                                <p:commandLink  id="editar" title="editar" actionListener="#{Beans_DefensaCivil_Certificado.onClickBusq}" 
                                                                value="Editar" action="#{Beans_DefensaCivil_Certificado.modificarCertificado(listCertificado)}"  
                                                                async="true" update=":CertificadoTabView, :CertificadoTabView"> 
                                                    <f:attribute name="param" value="#{2}" /> 
                                                </p:commandLink>                                                

                                            </p:column>
                                            <p:column exportable="false" >
                                                <f:facet name="header">
                                                    <center><h:outputText value="Resolucion"/></center>
                                                </f:facet>
                                                <img  src="resources/imagenes/resolucion.png" style="text-align: center" height="20"/>
                                                <p:commandLink  id="Generar" title="Generar" actionListener="#{Beans_DefensaCivil_Certificado.onClickBusq}"  
                                                                value="Generar" action="#{Beans_DefensaCivil_Certificado.Generar_resoluciones_ipse(listCertificado)}"  
                                                                async="true" update=":CertificadoTabView, :CertificadoTabView"> 
                                                    <f:attribute name="param" value="#{2}" /> 
                                                </p:commandLink>      
                                            </p:column>



                                            <p:column exportable="false" >

                                                <f:facet name="header">
                                                    <center><h:outputText value="Digitalizacion"/></center>
                                                </f:facet>

                                                <img  src="resources/imagenes/adjuntar.png" style="text-align: center" height="20"/>

                                                <p:commandLink  id="Digitalizacion" title="Digital" actionListener="#{Beans_DefensaCivil_Certificado.onClickBusq}"  
                                                                value="Digital" action="#{Beans_DefensaCivil_Certificado.BuscarArchivoVirtual(listCertificado)}"  
                                                                async="true" update=":CertificadoTabView, :CertificadoTabView"> 
                                                    <f:attribute name="param" value="#{2}" /> 
                                                </p:commandLink>                                                

                                            </p:column>


                                            <p:column  style="width:4%;text-align: center">
                                                <p:commandButton  id="BtnSeleccionarArchivo"  
                                                                  update=":CertificadoTabView:form_registro_informacion_virtual"  

                                                                  oncomplete="PF('DialogoSubirArchivoVirtual').show()" 
                                                                  icon="ui-icon-pencil"  title="Subir">   <!-- update=":formUpdate" -->

                                                    <f:setPropertyActionListener value="#{listCertificado}" 
                                                                                 target="#{Beans_DefensaCivil_Certificado.objRegistrarArchivoVirtual}" />

                                                </p:commandButton>
                                            </p:column>
                                        </p:dataTable>

                                    </h:panelGrid>  
                                </center>
                            </p:panel>  
                            <p:resizable for="Panel_Expedientes_defensa_Civil" animate="true" effect="swing" effectDuration="normal"/>
                        </h:form>

                        <p:dialog  id="DialogoSubirAdchivo" widgetVar="DialogoSubirArchivoVirtual" 
                                   modal="false" width="550" 
                                   height="105" styleClass="tamaño_fuente"
                                   responsive="true" resizable="false"
                                   closeOnEscape="true"> 

                            <h:form  id="form_registro_informacion_virtual"  enctype="multipart/form-data" 
                                     class="border_titulo1" style="text-align: left" styleClass="tamaño_fuente">


                                <p:growl globalOnly="true"  id="growl_informacion_virtual" 
                                         sticky="true"  showDetail="true"  />         
                                <p:panel id="panel_listado_expedientes_derivados" header="#{msg.LabelArchivosDigitales}" styleClass="border" style="text-align: center">
                                    <center>
                                        <h:panelGrid columns="4"  cellspacing="1" cellpadding="1" > 
                                            <h:outputText value="#{msg.labelExpediente}"  styleClass="tamaño_fuente" style="font-weight:bold"  rendered="false"/>
                                            <h:panelGroup>
                                                <p:inputText  id="expediente_id_legajo" size="10" disabled="true"  
                                                              value="#{Beans_DefensaCivil_Certificado.objRegistrarArchivoVirtual.objUpload.expediente_id}" 
                                                              rendered="false" >
                                                </p:inputText>
                                                <h:message for="expediente_id_legajo" showDetail="false" showSummary="true"/>                                    
                                            </h:panelGroup>
                                            <h:outputText value="#{msg.LabelNombreArchvo}"  styleClass="tamaño_fuente" />
                                            <h:panelGroup>
                                                <p:inputText  id="nombre_archivo"  value="#{Beans_DefensaCivil_Certificado.objRegistrarArchivoVirtual.objUpload.nombre_archivo}"  >
                                                </p:inputText>
                                                <h:message for="nombre_archivo" showDetail="false" showSummary="true"/>                                    
                                            </h:panelGroup>
                                            <p:fileUpload  value="#{Beans_DefensaCivil_Certificado.objRegistrarArchivoVirtual.objUpload.file}" mode="simple"  /> 
                                        </h:panelGrid> 
                                    </center>
                                    <h:panelGrid columns="4"  >
                                        <p:commandButton value="Subir" actionListener="#{Beans_DefensaCivil_Certificado.doRegArchivoVirtual()}" ajax="false"  />  
                                    </h:panelGrid>            
                                </p:panel> 

                            </h:form>
                        </p:dialog>

                    </p:tab> 
                    <p:tab id="tab_Editar_Certificado" title="Editar Ipse" titletip="Modificar Certificado"  titleStyleClass="tamaño_fuente_tab"
                           disabled="#{Beans_DefensaCivil_Certificado.bandMod}">

                        <h:form  id="form_mod_Certificado" class="border_titulo1" style="text-align: left" styleClass="tamaño_fuente">
                            <p:growl globalOnly="true"  id="estModCertificado" sticky="false"  showDetail="true"  />                                
                            <p:panel id="datGenCertificado" header="#{msg.labelDatosCertificado}" styleClass="tamaño_fuente"
                                     style=" border: solid activeborder"   >  <!--border-->


                                <h:panelGrid columns="1" style=" width:  10%; margin-left:  80%" >
                                    <h:outputText value="#{msg.labelExpediente}"   />
                                    <h:panelGroup>
                                        <p:inputText id="Exp_1"  required="true" requiredMessage="#{msg.labelObli}"
                                                     disabled="true"  style=" color:  #FF0000" 
                                                     maxlength="30" validatorMessage="#{msg.labelValidar}"  
                                                     value="#{Beans_DefensaCivil_Certificado.objCertificadoMod.nro_expediente}"  >  
                                            <f:validateLength minimum="0" maximum="30"/>
                                        </p:inputText>
                                        <h:message for="Exp_1" showDetail="false" showSummary="true"/>                                    
                                    </h:panelGroup>
                                </h:panelGrid>


                                <center>
                                    <!--  
                                   <h:panelGrid columns="2" cellpadding="2"   width="80%"  >
                                      <h:panelGrid columns="1">              
                                          <h:outputText value="{msg.labelAreaFinal}"  style="margin-right:20px;"/>
                                          <h:panelGroup>
                                              <p:inputText id="Area"  required="true" requiredMessage="{msg.labelObli}"  
                                                           size="100" disabled="true" style=" color:  #FF0000"
                                                           maxlength="17" validatorMessage="{msg.labelValidar}"  
                                             value="{Beans_DefensaCivil_Certificado.objCertificadoMod.area}"  >  
                                                  <f:validateLength minimum="0" maximum="17"/>
                                              </p:inputText>
                                              <h:message for="Area" showDetail="false" showSummary="true"/>                                    
                                          </h:panelGroup>
                                      </h:panelGrid> 

                                   </h:panelGrid> -->

                                    <h:panelGrid columns="2" cellpadding="2"   width="80%"  >
                                        <h:panelGrid columns="1">   
                                            <h:outputText value="#{msg.LabelCodigoContribuyente}"  style="margin-right:0px;"/>
                                            <h:panelGroup>
                                                <p:inputText id="contr"  required="true" requiredMessage="#{msg.labelObli}" 
                                                             size="20" disabled="true" style=" color:  #FF0000"
                                                             maxlength="30" validatorMessage="#{msg.labelValidar}" 
                                                             value="#{Beans_DefensaCivil_Certificado.objCertificadoMod.objPersona.codigo_contribuyente}"                >  
                                                    <f:validateLength minimum="0" maximum="30"/>
                                                </p:inputText>
                                                <h:message for="contr" showDetail="false" showSummary="true"/>                                    
                                            </h:panelGroup>
                                        </h:panelGrid>

                                        <h:panelGrid columns="1">  
                                            <h:outputText value="#{msg.LabelNombres}"  style="margin-right:40px;"/>
                                            <h:panelGroup>
                                                <p:inputText id="Exp"  required="true" requiredMessage="#{msg.labelObli}" 
                                                             size="100" disabled="true" style=" color:  #FF0000"
                                                             maxlength="30" validatorMessage="#{msg.labelValidar}"  
                                                             value="#{Beans_DefensaCivil_Certificado.objCertificadoMod.objPersona.nombres_apellidos}">  
                                                    <f:validateLength minimum="0" maximum="250"/>
                                                </p:inputText>
                                                <h:message for="Exp" showDetail="false" showSummary="true"/>                                    
                                            </h:panelGroup>
                                        </h:panelGrid>

                                    </h:panelGrid>


                                    <h:panelGrid columns="2" cellpadding="2"   width="80%"  >
                                        <h:panelGrid columns="1">                        
                                            <h:outputText value="#{msg.LabelDireccion}"  style="margin-right:0px;"/>
                                            <h:panelGroup>
                                                <p:inputTextarea rows="3" cols="100" counter="direc" maxlength="500"   disabled="true" style=" color:  #FF0000"

                                                                 required="true" requiredMessage="#{msg.labelObli}" 
                                                                 autoResize="true" id="direcciones"
                                                                 counterTemplate="{0} #{msg.LabelContador}" 
                                                                 value="#{Beans_DefensaCivil_Certificado.objCertificadoMod.direccion}">
                                                </p:inputTextarea> 
                                                <br />
                                                <h:outputText id="direc"/>    
                                                <h:message for="direccion" showDetail="false" showSummary="true"/>                                    
                                            </h:panelGroup>
                                        </h:panelGrid>


                                        <h:panelGrid columns="1">                            
                                            <h:outputText value="#{msg.labelRepresentanteLegal}"  style="margin-right:40px;"/>
                                            <h:panelGroup>
                                                <p:inputText id="Representante_Legal" 
                                                             requiredMessage="#{msg.labelObli}" size="50"
                                                             maxlength="30" 
                                                             value="#{Beans_DefensaCivil_Certificado.objCertificadoMod.representante_legal}"
                                                             >  
                                                    <f:validateLength minimum="0" maximum="30"/>
                                                </p:inputText>
                                                <h:message for="Representante_Legal" showDetail="false" showSummary="true"/>                                    
                                            </h:panelGroup>
                                        </h:panelGrid>

                                    </h:panelGrid>


                                    <h:panelGrid columns="2" cellpadding="2"   width="80%"  > 

                                        <h:panelGrid columns="1">        
                                            <h:outputText value="#{msg.LabelAsunto}"  style="margin-right:150px;"/>
                                            <h:panelGroup>
                                                <p:inputTextarea rows="3" cols="100" counter="asun" maxlength="500"  

                                                                 required="true" requiredMessage="#{msg.labelObli}" autoResize="true" id="asunto"
                                                                 counterTemplate="{0} #{msg.LabelContador}" value="#{Beans_DefensaCivil_Certificado.objCertificadoMod.asunto}">
                                                </p:inputTextarea> 
                                                <br />
                                                <h:outputText id="asun"/>    
                                                <h:message for="asunto" showDetail="false" showSummary="true"/>                                    
                                            </h:panelGroup>
                                        </h:panelGrid>


                                        <h:panelGrid columns="1"> 
                                            <h:outputText value="#{msg.LabelAnotaciones}" style="margin-right:38px;"  />  
                                            <h:panelGroup>
                                                <p:inputTextarea rows="3" cols="50" counter="asun" maxlength="500"  

                                                                 required="true" requiredMessage="#{msg.labelObli}" autoResize="true" id="anotaciones_mod"
                                                                 counterTemplate="{0} #{msg.LabelContador}" value="#{Beans_DefensaCivil_Certificado.objCertificadoMod.anotaciones}">
                                                </p:inputTextarea> 
                                                <br />
                                                <h:outputText id="mod_anotaciones"/>    
                                                <h:message for="anotaciones_mod" showDetail="false" showSummary="true"/>                                    
                                            </h:panelGroup>
                                        </h:panelGrid>


                                    </h:panelGrid>


                                    <h:panelGrid columns="4" cellpadding="2"   width="80%"  > 


                                        <h:panelGrid columns="1">  
                                            <h:outputText value="#{msg.labelRazonSocial}"  style="margin-right:0px;"/>
                                            <h:panelGroup>
                                                <p:inputText id="RazonSocial"  required="true" requiredMessage="#{msg.labelObli}" size="50" style=" align-content: center"
                                                             maxlength="100" validatorMessage="#{msg.labelValidar}"  value="#{Beans_DefensaCivil_Certificado.objCertificadoMod.objPersona.nombres_apellidos}"
                                                             >  
                                                    <f:validateLength minimum="0" maximum="100"/>
                                                </p:inputText>
                                                <h:message for="RazonSocial" showDetail="false" showSummary="true"/>                                    
                                            </h:panelGroup>
                                        </h:panelGrid>


                                        <h:panelGrid columns="1">   
                                            <h:outputText value="#{msg.LabelGiro}"  style="margin-right:260px;"/> 
                                            <h:panelGroup>

                                                <p:selectOneMenu effect="fade" filter="true"  filterMatchMode="contains" required="true" id="GiroDeclarado" 
                                                                 style="width:280px"  height="200"  autoWidth="false"   
                                                                 validatorMessage="#{msg.labelValidar}"  requiredMessage="#{msg.labelObli}" 
                                                                 value="#{Beans_DefensaCivil_Certificado.objCertificadoMod.objgiros.codigo_giro}">
                                                    <f:selectItem itemLabel="#{msg.labelSeleccionar}" 
                                                                  itemValue="O"/> 
                                                    <f:selectItems value="#{Certificado.cargarComboGiros}" />
                                                </p:selectOneMenu>
                                                <h:message for="GiroDeclarado" showDetail="false" showSummary="true"/>     

                                            </h:panelGroup>

                                        </h:panelGrid>



                                        <h:panelGrid columns="1">  


                                            <h:outputText value="#{msg.labelAreaDeclarada}"  style="margin-right:20px; margin-bottom: 10px"/>
                                            <h:panelGroup>
                                                <p:inputText id="areadeclarada"  required="true" requiredMessage="#{msg.labelObli}" size="5"
                                                             maxlength="5" validatorMessage="#{msg.labelValidar}" 
                                                             value="#{Beans_DefensaCivil_Certificado.objCertificadoMod.area_declarada}"
                                                             >  
                                                    <f:validateLength minimum="0" maximum="5"/>
                                                </p:inputText>
                                                <p:slider for="areadeclarada" minValue="1" maxValue="20000" step="1"  styleClass="ui-slider"/>
                                                <h:message for="areadeclarada" showDetail="false" showSummary="true"/>                                    
                                            </h:panelGroup> 

                                        </h:panelGrid>


                                        <h:panelGrid columns="1"> 

                                            <h:outputText value="#{msg.labelaforo}"   style="margin-right:20px;"/>
                                            <h:panelGroup>
                                                <p:inputText id="aforo"  required="true" requiredMessage="#{msg.labelObli}" size="4"
                                                             maxlength="5" validatorMessage="#{msg.labelValidar}"  value="#{Beans_DefensaCivil_Certificado.objCertificadoMod.aforo}"
                                                             >  
                                                    <f:validateLength minimum="0" maximum="5"/>
                                                </p:inputText>
                                                <h:message for="aforo" showDetail="false" showSummary="true"/>      

                                                <p:slider for="aforo" minValue="1" maxValue="20000" step="1"  styleClass="ui-slider" />
                                            </h:panelGroup>  
                                        </h:panelGrid>                      
                                    </h:panelGrid>


                                    <h:panelGrid columns="4" cellpadding="2"   width="80%"  > 


                                        <h:panelGrid columns="1" cellpadding="1"  >   
                                            <h:outputText value="#{msg.LabelTipoIpse}"   style="margin-right:10%"/>
                                            <h:panelGroup >
                                                <p:selectOneMenu effect="fade"  style="width:180px" autoWidth="false"
                                                                 filter="true"  filterMatchMode="contains"
                                                                 required="true" id="ipse"
                                                                 validatorMessage="#{msg.labelValidar}"
                                                                 requiredMessage="#{msg.labelObli}" value="#{Beans_DefensaCivil_Certificado.objCertificadoMod.id_tipo_licencia}">

                                                    <f:selectItem itemLabel="#{msg.labelSeleccionar}" itemValue="O"/> 
                                                    <f:selectItem itemLabel="BASICA EX POST" itemValue="1" />
                                                    <f:selectItem itemLabel="BASICA EX ANTE" itemValue="2" />
                                                    <f:selectItem itemLabel="DE DETALLE" itemValue="3" />

                                                </p:selectOneMenu>
                                                <h:message for="ipse" showDetail="false" showSummary="true"/>     
                                            </h:panelGroup>
                                        </h:panelGrid> 


                                        <h:panelGrid columns="1">  

                                            <h:outputText value="#{msg.LabelNombreInspector}"  style="margin-right:20px;"/>
                                            <h:panelGroup>
                                                <p:selectOneMenu effect="fade" filter="true"  filterMatchMode="contains" required="true" id="id_inspector"   
                                                                 validatorMessage="#{msg.labelValidar}"  requiredMessage="#{msg.labelObli}" 
                                                                 value="#{Beans_DefensaCivil_Certificado.objCertificadoMod.nombre_inspector}">

                                                    <f:selectItem itemLabel="#{msg.labelSeleccionar}"   class="tamaño_fuente" itemValue="O"/> 
                                                    <f:selectItems value="#{Certificado.cargarInpectores}"  />


                                                </p:selectOneMenu>
                                                <h:message for="id_inspector" showDetail="false" showSummary="true"/>     
                                            </h:panelGroup>
                                        </h:panelGrid>


                                        <!--
                                           <h:panelGrid columns="1">  
                                               <h:outputText value="{msg.Observaciones}" style="margin-right:10px;" /> 
                                               <h:panelGroup>
                                                   <p:inputTextarea rows="3" cols="50" counter="obser" maxlength="500"                      
   
                                                                    autoResize="true" id="editar_observaciones"
                                                                    counterTemplate="{0} {msg.LabelContador}" 
                                                                    value="{Beans_DefensaCivil_Certificado.objCertificadoMod.observaciones_seguridad}">
   
   
                                                   </p:inputTextarea> 
                                                   <br />
   
                                                   <h:outputText id="obser"/>    
                                                   <h:message for="editar_observaciones" showDetail="false" showSummary="true"/>                                  
                                               </h:panelGroup>  
                                           </h:panelGrid>  -->
                                    </h:panelGrid>


                                    <h:panelGroup>
                                        <p:selectCheckboxMenu id="observaciones_ipse"  
                                                              value="#{Beans_DefensaCivil_Certificado.objCertificadoMod.observacion_Ipse}" 
                                                              label="Observacion Ipse"
                                                              filter="true" filterMatchMode="startsWith" panelStyle="width:20%">
                                            <f:selectItems value="#{Certificado.cargarObservacionesIpse}" />

                                        </p:selectCheckboxMenu>
                                    </h:panelGroup>




                                    <center>
                                        <img  src="resources/imagenes/verificado.png" style="text-align: center" height="20px"/>
                                        <h:outputText value="#{msg.LabelInformacionVerificada}"   style=" color: #FF0000"/>
                                    </center>

                                    <h3 style="margin-top:0"></h3>
                                    <p:separator />

                                    <br>
                                    </br>


                                    <h:panelGrid columns="6" cellpadding="1"   width="60%" >


                                        <h:outputText value="#{msg.LabelDireccionVerificada}"  style="margin-right:0px;"/>

                                        <h:panelGroup>

                                            <p:inputTextarea rows="3" cols="62" counter="direcverificada" maxlength="500"   disabled="false" style=" color:  #FF0000"

                                                             required="true" requiredMessage="#{msg.labelObli}" autoResize="true" id="DireccionVerificada"
                                                             counterTemplate="{0} #{msg.LabelContador}" 
                                                             value="#{Beans_DefensaCivil_Certificado.objCertificadoMod.direccion_verificada}">
                                            </p:inputTextarea> 
                                            <br />

                                            <h:outputText id="direcverificada"/>    
                                            <h:message for="DireccionVerificada" showDetail="false" showSummary="true"/>                                    
                                        </h:panelGroup>





                                        <h:form id="form_reg_direcciones" class="border_tittulo" style="max-width: 40%; min-height: 30%" styleClass="tamaño_fuente"> 

                                            <p:growl globalOnly="true" id="growl_direcciones"   sticky="false"    showDetail="true"/>  <!--Habilitando Mensajes Por defecto-->     

                                            <p:commandButton value="Direccion" onclick="PF('dlg').show();" type="button" icon="ui-icon-extlink" /> 

                                            <p:dialog header="Direccion" widgetVar="dlg"  resizable="true" 
                                                      style="max-width: 40%; min-height: 30%" minimizable="true" maximizable="true" visible="false">
                                                <p:panel id="panel_direcciones"   >


                                                    <h:panelGrid columns="2" style="margin-bottom:10px" cellpadding="5">
                                                        <p:outputLabel for="id_distrito" value="#{msg.LabelDistrito}" />
                                                        <p:selectOneRadio id="id_distrito" value="#{Beans_Direcciones.objBuscarDirecciones.codigo_postal}"  layout="grid" columns="1">

                                                            <f:selectItem itemLabel="SAN MARTIN" itemValue="L31" />


                                                        </p:selectOneRadio>
                                                    </h:panelGrid>



                                                    <h:panelGrid columns="4"  cellpadding="3"  cellspacing="3" style="text-align: center;" width="17%">

                                                        <p:commandButton id="saveBtnINI" icon="ui-icon-document" actionListener="#{Beans_Direcciones.doiniciarBusquedaDirecciones()}"  
                                                                         value="#{msg.labelNuevo}" async="true" update="panel_direcciones"/>

                                                        <p:commandButton id="saveBtn" icon="ui-icon-folder-open" actionListener="#{Beans_Direcciones.doBuscarDirecciones()}"  
                                                                         value="#{msg.btnConsultar}" async="true" update="panel_direcciones" />  

                                                    </h:panelGrid>



                                                    <p:blockUI block="panel_direcciones" trigger="saveBtn">   Buscando... <br />
                                                        <p:graphicImage value="resources/imagenes/cargando1.gif" />   
                                                    </p:blockUI>


                                                    <center>
                                                        <h:panelGrid columns="2" >
                                                            <h:outputText styleClass="etiqueta_resultBusqdireciones" value="#{msg.labelCantidad}"/>
                                                            <h:outputText styleClass="etiqueta_resultBusqdireccione" value="#{Beans_Direcciones.arrBusDirecciones.size()}"/>               
                                                        </h:panelGrid> 

                                                        <h:panelGrid columns="1"   cellpadding="0"  cellspacing="0" 
                                                                     border="0"  styleClass="width-table"> 

                                                            <p:dataTable id="table_direcciones" var="var_listadodirecciones"  value="#{Beans_Direcciones.arrBusDirecciones}" 
                                                                         styleClass="tamaño_fuente" paginator="true" 
                                                                         rows="5"  rowsPerPageTemplate="5,10,15,20,25,30,50" 
                                                                         paginatorPosition="both" paginatorAlwaysVisible="true" 
                                                                         scrollable="true" scrollHeight="170" scrollWidth="650" editable="true"
                                                                         >



                                                                <p:column style="width:32px">
                                                                    <p:rowEditor />

                                                                </p:column>

                                                                <p:column  style="width:60px;text-align: center">

                                                                    <f:facet name="header">
                                                                        <h:outputText value="#{msg.LabelCodigoHabilitaciones}" />
                                                                    </f:facet>

                                                                    <p:cellEditor>

                                                                        <f:facet name="output">
                                                                            <h:outputText  value="#{var_listadodirecciones.codigo_via}" />
                                                                        </f:facet> 

                                                                        <f:facet name="input">
                                                                            <h:inputText  value="#{var_listadodirecciones.codigo_via}" />
                                                                        </f:facet> 

                                                                    </p:cellEditor>


                                                                </p:column>  

                                                                <p:column filterBy="#{var_listadodirecciones.tipo_via}"  style="width:100px;text-align: center">
                                                                    <f:facet name="header">

                                                                        <h:outputText value="#{msg.LabelTipoVia}" />
                                                                    </f:facet>

                                                                    <p:cellEditor>

                                                                        <f:facet name="output">
                                                                            <h:outputText  value="#{var_listadodirecciones.tipo_via}" />
                                                                        </f:facet> 

                                                                        <f:facet name="input">
                                                                            <h:inputText  value="#{var_listadodirecciones.tipo_via}" />
                                                                        </f:facet> 

                                                                    </p:cellEditor>


                                                                </p:column>  

                                                                <p:column  filterBy="#{var_listadodirecciones.nombre_via}" style="width:130px;text-align: center">
                                                                    <f:facet name="header">
                                                                        <h:outputText value="#{msg.LabelNombreVia}" />
                                                                    </f:facet>

                                                                    <p:cellEditor>

                                                                        <f:facet name="output">
                                                                            <h:outputText  value="#{var_listadodirecciones.nombre_via}"  />
                                                                        </f:facet> 

                                                                        <f:facet name="input">
                                                                            <h:inputText  value="#{var_listadodirecciones.nombre_via}"  />
                                                                        </f:facet> 

                                                                    </p:cellEditor>

                                                                </p:column>  


                                                                <p:column  filterBy="#{var_listadodirecciones.habilitacion}" style="width:130px;text-align: center">
                                                                    <f:facet name="header">
                                                                        <h:outputText value="#{msg.LabelHabilitaciones}" />
                                                                    </f:facet>

                                                                    <p:cellEditor>

                                                                        <f:facet name="output">
                                                                            <h:outputText  value="#{var_listadodirecciones.nombre_habilitacion}"  />
                                                                        </f:facet> 

                                                                        <f:facet name="input">
                                                                            <h:inputText  value="#{var_listadodirecciones.nombre_habilitacion}"  />
                                                                        </f:facet> 

                                                                    </p:cellEditor>

                                                                </p:column>  


                                                                <p:column  filterBy="#{var_listadodirecciones.tipo_habilitacion}" style="width:130px;text-align: center">
                                                                    <f:facet name="header">
                                                                        <h:outputText value="#{msg.LabelTipoHabilitaciones}" style="text-align: center"/>
                                                                    </f:facet>

                                                                    <p:cellEditor>

                                                                        <f:facet name="output">
                                                                            <h:outputText  value="#{var_listadodirecciones.tipo_habilitacion}"  />
                                                                        </f:facet> 

                                                                        <f:facet name="input">
                                                                            <h:inputText  value="#{var_listadodirecciones.tipo_habilitacion}"  />
                                                                        </f:facet> 

                                                                    </p:cellEditor>

                                                                </p:column >

                                                                <p:ajax event="rowEdit" listener="#{Beans_Direcciones.doRegDirecciones(var_listadodirecciones)}"/>

                                                                <p:column style="width:130px;text-align: center" >

                                                                    <p:commandButton value="Direccion" type="button" >



                                                                    </p:commandButton>

                                                                </p:column> 
                                                            </p:dataTable>  
                                                        </h:panelGrid>  
                                                    </center>

                                                </p:panel>
                                            </p:dialog>   

                                        </h:form>       


                                        <br>
                                        </br>


                                        <h:outputText value="#{msg.LabelAreaVerificada}"  style="margin-right:0px;"/>

                                        <h:panelGroup>
                                            <p:inputText id="AreaVerificada"  required="true" requiredMessage="#{msg.labelObli}" size="5"
                                                         maxlength="5" validatorMessage="#{msg.labelValidar}"  value="#{Beans_DefensaCivil_Certificado.objCertificadoMod.area_verificada}"
                                                         >  
                                                <f:validateLength minimum="0" maximum="5"/>
                                            </p:inputText>

                                            <h:message for="AreaVerificada" showDetail="false" showSummary="true"/>    
                                            <p:slider for="AreaVerificada" minValue="1" maxValue="20000" step="1"  styleClass="ui-slider"/>

                                        </h:panelGroup>






                                        <h:panelGrid columns="2" style="margin-bottom:10px" cellpadding="5">
                                            <h:outputText value="CUMPLE ITPSE:" />
                                            <p:selectBooleanButton id="estado_fiscalizacion"
                                                                   value="#{Beans_DefensaCivil_Certificado.objCertificadoMod.estado_fiscalizacion}" 
                                                                   onLabel="Yes" offLabel="No" 
                                                                   onIcon="ui-icon-check" offIcon="ui-icon-close" style="width:60px" />


                                        </h:panelGrid>




                                        <h:panelGrid columns="2" style="margin-bottom:10px" cellpadding="5">
                                            <p:outputLabel for="RESUL" value="CUMPLE ITPSE:" />
                                            <p:selectOneRadio id="RESUL" value="#{Beans_DefensaCivil_Certificado.objCertificadoMod.resultado}"  layout="grid" columns="2">

                                                <f:selectItem itemLabel="IMPROCEDENTE" itemValue="0" />
                                                <f:selectItem itemLabel="APROBADO" itemValue="1" />
                                                <f:selectItem itemLabel="EN PREOCESO" itemValue="2" />
                                            </p:selectOneRadio>
                                        </h:panelGrid>   



                                    </h:panelGrid>



                                    <h:panelGrid columns="4"  cellpadding="3"  cellspacing="6"   styleClass="panelColumns" columnClasses="labelOT2, valueOT2"  >
                                        <p:commandButton icon="ui-icon-triangle-1-w"  id="cancelar_editar"
                                                         actionListener="#{Beans_DefensaCivil_Certificado.desactivaTabModificarIpse()}"  immediate="true"  value="#{msg.labelCancelar}"  
                                                         async="true" update=":CertificadoTabView, :CertificadoTabView:form_mod_Certificado" />

                                        <p:commandButton   id="btneditar" disabled="#{Beans_DefensaCivil_Certificado.objCertificadoMod.objboton.estado_boton}" 
                                                           actionListener="#{Beans_DefensaCivil_Certificado.doModCertificado()}" icon="ui-icon-arrowrefresh-1-s" async="true"  
                                                           value="#{msg.btnActualizar}"  update=":CertificadoTabView, :CertificadoTabView:form_mod_Certificado,  estModCertificado"  />  <!-- update=":CertificadoTabView, :CertificadoTabView:Form_expediente_defensa_civil,  estModCertificado"  -->


                                    </h:panelGrid>     
                                    <p:blockUI block="datGenCertificado" trigger="cancelar_editar">                                               
                                        Cancelando la Actualización ... <br />
                                        <p:graphicImage value="resources/imagenes/cargando.gif" />   
                                    </p:blockUI>

                                    <p:blockUI block="datGenCertificado" trigger="btneditar">                                               
                                        Actualizando... <br />
                                        <p:graphicImage value="resources/imagenes/cargando.gif" />   
                                    </p:blockUI>

                                </center>


                            </p:panel>
                        </h:form>

                    </p:tab>
                    <p:tab id="tab_certificados" title="Generar Resoluciones Ipse" titletip="Certificado" titleStyleClass="tamaño_fuente_tab" 
                           disabled="#{Beans_DefensaCivil_Certificado.bandMod}">

                        <h:form  id="formulario_busqueda_Expedientes_defensa_civil" class="border_titulo1"  style="text-align : justify;" styleClass="tamaño_fuente">    
                            <p:growl globalOnly="true"  id="Growl_Mensaje_busqueda" sticky="false"  showDetail="true"  />    
                            <p:panel id="Panel_busqueda_Expediente_defensa_Civil" header="#{msg.LabelCertificado}" styleClass="border" style="text-align: center">


                                <h:panelGrid columns="1"   >

                                    <div id="day" style="font-size: 12px">
                                        Usuario
                                        <p:clock  pattern="dd MMMM yy HH:mm:ss" mode="client" />                        

                                    </div>

                                </h:panelGrid> 
                                <center>
                                    <h:panelGrid columns="2"  >
                                        <h:outputText value="#{msg.LabelNumeroExpediente}" />

                                        <h:panelGroup>
                                            <p:inputMask id="generar_buscar_expediente"  
                                                         mask="99999-99-9999"                                            
                                                         size="15" 
                                                         value="#{Beans_DefensaCivil_Certificado.objBuscarGenerarResolucion.nro_expediente}" >                                                   
                                            </p:inputMask>
                                            <h:message for="generar_buscar_expedientes" showDetail="true" showSummary="true"/>                                                     
                                        </h:panelGroup>




                                    </h:panelGrid>               
                                    <!--BLOC-->
                                    <br></br>

                                </center>
                                <h:panelGrid columns="4"  cellpadding="3"  cellspacing="3" style="text-align: center;" width="30%">


                                    <p:commandButton icon="ui-icon-triangle-1-w"  id="cancelar_editar"
                                                     actionListener="#{Beans_DefensaCivil_Certificado.desactivaTabGenerarResolucionesIpse}" 
                                                     immediate="true"  value="#{msg.labelCancelar}"  
                                                     async="true" update=":CertificadoTabView, :CertificadoTabView:formulario_busqueda_Expedientes_defensa_civil" />


                                    <p:commandButton id="saveBtnINI" icon="ui-icon-document" actionListener="#{Beans_DefensaCivil_Certificado.doiniciarBusquedaReporteResoluciones()}"  
                                                     value="#{msg.labelNuevo}" async="true" update="Panel_busqueda_Expediente_defensa_Civil"/>

                                    <p:commandButton id="saveBtn" icon="ui-icon-folder-open" actionListener="#{Beans_DefensaCivil_Certificado.doBuscarReporteResoluciones()}"  
                                                     value="#{msg.btnConsultar}" async="true" update="Panel_busqueda_Expediente_defensa_Civil"/> 

                                    <p:commandButton id="btgenerar" icon="ui-icon-arrowrefresh-1-s" actionListener="#{Beans_DefensaCivil_Certificado.dogenerarResoluciones()}"  
                                                     value="#{msg.BtnGenerarExpedientes}" async="true" update="Panel_busqueda_Expediente_defensa_Civil">  

                                        <p:confirm message="Desea Generar Resolucion Ipse ?" header="Aviso"  icon="ui-icon-alert"/>
                                    </p:commandButton>

                                    <p:confirmDialog global="true" styleClass="tamaño_fuente">

                                        <p:commandButton value="Si" type="button" icon="ui-icon-check" styleClass="ui-confirmdialog-yes"/>
                                        <p:commandButton value="No" type="button" icon="ui-icon-close" styleClass="ui-confirmdialog-no"/>
                                    </p:confirmDialog>



                                </h:panelGrid>

                                <h:panelGrid columns="3" cellpadding="2"  cellspacing="2"  width="10%">

                                    <h:panelGrid columns="2">

                                        <img src="resources/imagenes/printer.png"/>
                                        <h:commandLink id="reporte"  value="Imprimir" actionListener="#{BeanExpediente_Reporte.verReporteDefensaCivilCertificado()}" title="Certificados"/>
                                    </h:panelGrid> 

                                    <h:commandLink >
                                        <p:graphicImage url="resources/imagenes/xls.png"/>
                                        <p:dataExporter type="xls" target="resListadoCertificado" fileName="Informacion Certificado" />           
                                    </h:commandLink>

                                </h:panelGrid> 

                                <p:blockUI block="Panel_busqueda_Expediente_defensa_Civil" trigger="saveBtn">   Buscando... <br />
                                    <p:graphicImage value="resources/imagenes/cargando1.gif" />   
                                </p:blockUI>

                                <br />
                                <center>
                                    <h:panelGrid columns="2" >
                                        <h:outputText styleClass="etiqueta_resultBusq" value="#{msg.labelCantidad}"/> 
                                        <h:outputText styleClass="etiqueta_resultBusq" value="#{Beans_DefensaCivil_Certificado.arrBusReporteResoluciones.size()}"/>      
                                    </h:panelGrid> 

                                    <h:panelGrid columns="1"   cellpadding="0"  cellspacing="0" 
                                                 border="0"  styleClass="width-table"> 

                                        <p:dataTable id="resListadoCertificado" value="#{Beans_DefensaCivil_Certificado.arrBusReporteResoluciones}"
                                                     var="listarDocumento"  styleClass="order-table" paginator="true"
                                                     rows="5"  rowsPerPageTemplate="5,10,15,20,25,30,50" 
                                                     paginatorPosition="both" paginatorAlwaysVisible="true">


                                            <p:column >
                                                <f:facet name="header">
                                                    <h:outputText value="#{msg.LabelCodigoContribuyente}" />
                                                </f:facet>
                                                <h:outputText  value="#{listarDocumento.objPersona.codigo_contribuyente}"/>
                                            </p:column>   

                                            <p:column>
                                                <f:facet name="header">
                                                    <h:outputText value="#{msg.LabelNombres}" />
                                                </f:facet>
                                                <h:outputText  value="#{listarDocumento.objPersona.nombres_apellidos}"/>
                                            </p:column>  



                                            <p:column filterBy="#{listarDocumento.nro_expediente}" filterMatchMode="contains" style="width:8%;text-align: center"  >
                                                <f:facet name="header">
                                                    <h:outputText value="#{msg.LabelNumeroExpediente}" />
                                                </f:facet>
                                                <h:outputText value="#{listarDocumento.nro_expediente}"/>
                                            </p:column> 


                                            <p:column >
                                                <f:facet name="header">
                                                    <h:outputText value="#{msg.LabelFecha}" />
                                                </f:facet>
                                                <h:outputText value="#{listarDocumento.fecha_expediente}"/>
                                            </p:column> 


                                            <p:column >
                                                <f:facet name="header">
                                                    <h:outputText value="#{msg.LabelNumeroResolucion}" />
                                                </f:facet>
                                                <h:outputText value="#{listarDocumento.numero_resolucion}"/>
                                            </p:column> 


                                            <p:column >
                                                <f:facet name="header">
                                                    <h:outputText value="#{msg.LabelGiro}" />
                                                </f:facet>
                                                <h:outputText  value="#{listarDocumento.objgiros.giro_detalle}"/>

                                            </p:column> 

                                            <p:column  >
                                                <f:facet name="header">
                                                    <h:outputText value="#{msg.LabelTipoLicencia}" />
                                                </f:facet>
                                                <h:outputText  value="#{listarDocumento.descripcion_tipo_licencia}"/>

                                            </p:column>  


                                            <p:column >
                                                <f:facet name="header">
                                                    <h:outputText value="#{msg.LabelResultado}" />
                                                </f:facet>
                                                <h:outputText  value="#{listarDocumento.resultados_expediente_ipse}"/>

                                            </p:column> 




                                            <p:column  style="width:20%;text-align: justify " >
                                                <f:facet name="header"  >
                                                    <h:outputText value="#{msg.LabelObservaciones}" />
                                                </f:facet>
                                                <h:outputText  value="#{listarDocumento.observaciones_seguridad}"/>

                                            </p:column> 



                                            <p:column >
                                                <f:facet name="header">
                                                    <h:outputText value="#{msg.LabelEstadoExpediente}" />
                                                </f:facet>
                                                <h:outputText  value="#{listarDocumento.objExpediente.estado_expediente}"/>

                                            </p:column> 



                                            <p:column  visible="false">
                                                <f:facet name="header">
                                                    <h:outputText value="#{msg.LabelCorrelativoExpedinete}" />
                                                </f:facet>
                                                <h:outputText  value="#{listarDocumento.correlativo_expediente}"/>

                                            </p:column>  



                                            <p:column  rendered="false" >
                                                <f:facet name="header">
                                                    <h:outputText value="#{msg.LabelAnotacion}" />
                                                </f:facet>
                                                <h:outputText  value="#{listarDocumento.anotacion}"/>

                                            </p:column> 

                                            <p:column rendered="false" >
                                                <f:facet name="header">
                                                    <h:outputText value="#{msg.LabelAreaDestino}" />
                                                </f:facet>
                                                <h:outputText  value="#{listarDocumento.area_final}"/>

                                            </p:column> 

                                            <p:column rendered="false" >
                                                <f:facet name="header">
                                                    <h:outputText value="#{msg.labelFolio}" />
                                                </f:facet>
                                                <h:outputText  value="#{listarDocumento.total_folios}"/>

                                            </p:column> 

                                            <p:column rendered="false"  >
                                                <f:facet name="header">
                                                    <h:outputText value="#{msg.LabelUsuarioModificacion}" />
                                                </f:facet>
                                                <h:outputText  value="#{listarDocumento.usuario_modificacion}"/>

                                            </p:column> 

                                            <p:column rendered="false" >
                                                <f:facet name="header">
                                                    <h:outputText value="#{msg.LabelNumeroRegistro}" />
                                                </f:facet>
                                                <h:outputText  value="#{listarDocumento.numero_registro}"/>

                                            </p:column> 

                                            <p:column  rendered="false" >
                                                <f:facet name="header">
                                                    <h:outputText value="#{msg.LabelObservaciones}" />
                                                </f:facet>
                                                <h:outputText  value="#{listarDocumento.observaciones}"/>

                                            </p:column>      


                                            <p:column exportable="false" >
                                                <f:facet name="header">
                                                    <center><h:outputText value="Finalizar"/></center>
                                                </f:facet>
                                                <img  src="resources/imagenes/resolucion.png" style="text-align: center" height="20"/>
                                                <p:commandLink  id="finalizar_expediente" title="finalizar" actionListener="#{Beans_DefensaCivil_Certificado.onClickBusq}"  
                                                                value="Finalizar" action="#{Beans_DefensaCivil_Certificado.Finalizar_Expediente_Ipse(listarDocumento)}"  
                                                                async="true" update=":CertificadoTabView, :CertificadoTabView"> 
                                                    <f:attribute name="param" value="#{2}" /> 
                                                </p:commandLink> 

                                            </p:column>


                                            <p:column  style="width:4%;text-align: center">

                                                <p:commandButton  id="btnSeleccionar"   oncomplete="PF('DialogoImprimirIpse').show()" 
                                                                  icon="ui-icon-pencil"  title="Editar">

                                                    <f:setPropertyActionListener value="#{lista_contribuyente}" 
                                                                                 target="#{Beans_DefensaCivil_Certificado.objNumero_Expediente}" />

                                                </p:commandButton>

                                            </p:column>


                                        </p:dataTable>    
                                    </h:panelGrid>  
                                </center>
                            </p:panel>     
                        </h:form>

                        <h:form  id="form_imprimir_Certificados" class="border_titulo1"  style="text-align : justify;" styleClass="tamaño_fuente">    

                            <p:growl globalOnly="true"  id="estimprimirCertificado" sticky="false"  showDetail="true"  />    

                            <p:dialog  id="carDlg" widgetVar="DialogoImprimirIpse" modal="false" width="600"  height="300" styleClass="tamaño_fuente"
                                       closable="true" minimizable="true"   maximizable="true"  showEffect="true"
                                       draggable="true" resizable="true" responsive="true"
                                       closeOnEscape="true" footer="Imprimir">  


                                <p:panel id="datimprimirCertificados" header="#{msg.LabelCertificado}" 
                                         toggleable="true" closable="true" toggleSpeed="300" closeSpeed="300" widgetVar="panel_02" style="margin-bottom:20px; text-align:  left">

                                    <img  src="resources/imagenes/ecologico.png" style="text-align: center" height="20px"/>
                                    <h:outputText value="#{msg.LabelSensibilizacionEcologica}"  style=" color: green"  />

                                    <center>
                                        <br>
                                        </br>

                                        <h:panelGrid columns="2">
                                            <h:outputText value="#{msg.LabelNumeroExpediente}"/>
                                            <h:panelGroup>

                                                <p:inputText  id="fechaI"
                                                              required="true" requiredMessage="#{msg.labelObligatorio}"
                                                              maxlength="30" validatorMessage="#{msg.labelValidar}" 
                                                              value="#{Beans_DefensaCivil_Certificado.numero_expediente}"
                                                              >  
                                                    <f:validateLength minimum="0" maximum="30"/>
                                                </p:inputText>
                                                <h:message for="fechaI" showDetail="false" showSummary="true"/>                                    
                                            </h:panelGroup> 

                                        </h:panelGrid>  

                                        <br></br>

                                    </center>



                                    <h:panelGrid columns="3" cellpadding="1"  cellspacing="1"  width="15%">
                                        <h:panelGrid columns="2">
                                            <img  src="resources/imagenes/printer.png"/>
                                            <h:commandLink id="imprimir"  value="Imprimir_informacion" actionListener="#{Beans_DefensaCivil_Certificado.imprimir()}" title="Informacion"/>
                                        </h:panelGrid> 

                                    </h:panelGrid> 

                                    <center>


                                        <h:panelGrid columns="3" cellpadding="2"  cellspacing="2"  width="60%">

                                            <h:panelGrid columns="2" style="margin-bottom:10px" cellpadding="5">
                                                <p:outputLabel for="ITPSE" value="CUMPLE ITPSE:" />
                                                <p:selectOneRadio id="ITPSE" value="#{Beans_DefensaCivil_Certificado.tipo}"  layout="grid" columns="2">
                                                    <f:selectItem itemLabel="EXPOST" itemValue="1" />
                                                    <f:selectItem itemLabel="EXANTE" itemValue="2" />
                                                    <f:selectItem itemLabel="DETALLE" itemValue="3" />


                                                </p:selectOneRadio>
                                            </h:panelGrid>

                                            <h:panelGrid columns="2" style="margin-bottom:20px" cellpadding="5">

                                                <p:outputLabel for="ITPSEACTO" value="TIPO ACTO:" />
                                                <p:selectOneRadio id="ITPSEACTO" value="#{Beans_DefensaCivil_Certificado.acto}"  layout="grid" columns="3" >

                                                    <f:selectItem itemLabel="RESOLUCION IMPROCEDENTE" itemValue="0"  />
                                                    <f:selectItem itemLabel="CERTIFICADO" itemValue="1"  />
                                                    <f:selectItem itemLabel="RESOLUCION" itemValue="2" />
                                                    <f:selectItem itemLabel="CARTA" itemValue="3" />
                                                    <f:selectItem itemLabel="OFICIO" itemValue="4" /> 

                                                </p:selectOneRadio>
                                            </h:panelGrid> 
                                        </h:panelGrid>  
                                    </center>
                                </p:panel>      
                            </p:dialog>           
                        </h:form>     
                    </p:tab>
                    <!-- Resolver Expediente-->
                    <p:tab id="tab_Resolver_Certificado" title="Resolver Ipse" titletip="Resolver Expediente Ipse" titleStyleClass="tamaño_fuente_tab"  
                           disabled="#{Beans_DefensaCivil_Certificado.bandMod}">

                        <br>
                        </br>


                        <center>
                            <h:form  id="form_Resolver_Documento" class="border_titulo1" style="max-width: 55%; min-height: 30%" styleClass="tamaño_fuente">

                                <p:growl globalOnly="true"  id="estModDocumentos" sticky="false"  showDetail="true"  />                                
                                <p:panel id="resolverExpediente" header="#{msg.LabelResuelveExpediente}" 
                                         toggleable="true" closable="true" toggleSpeed="500" closeSpeed="500" widgetVar="panel_02"  
                                         >
                                    <div  style="left:  auto">
                                        <p:graphicImage url="resources/imagenes/finalizar.png" width="50px"   />  
                                    </div>



                                    <br>
                                    </br>


                                    <h:panelGrid columns="2" >


                                        <h:outputText value="#{msg.LabelCorrelativoExpedinete}"  style="margin-right:30px;"/>

                                        <h:panelGroup>

                                            <p:inputText id="identificacion"  required="true" requiredMessage="#{msg.labelObligatorio}" size="20" disabled="true" 
                                                         maxlength="30" validatorMessage="#{msg.labelValidar}"  
                                                         value="#{Beans_DefensaCivil_Certificado.objFinalizarExpedienteIpse.correlativo_expediente}"                       >  
                                                <f:validateLength minimum="0" maximum="30"/>
                                            </p:inputText>

                                            <h:message for="identificacion" showDetail="false" showSummary="true"/>                                    
                                        </h:panelGroup>


                                        <h:outputText value="#{msg.LabelEstadoDocumento}"  style="margin-right:30px;"/>

                                        <h:panelGrid columns="2" style="margin-bottom:30px" cellpadding="5">
                                            <h:panelGroup>                            
                                                <p:selectOneMenu effect="fade"
                                                                 filter="true"  filterMatchMode="contains"
                                                                 required="true" id="estadodocumento"
                                                                 validatorMessage="#{msg.labelValidar}"
                                                                 requiredMessage="#{msg.labelObligatorio}" 
                                                                 value="#{Beans_DefensaCivil_Certificado.objFinalizarExpedienteIpse.objExpediente.estado_expediente}">

                                                    <f:selectItem itemLabel="#{msg.labelSeleccionar}" itemValue="O"/> 

                                                    <f:selectItem itemLabel="EN TRAMITE" itemValue="01" />
                                                    <f:selectItem itemLabel="EN PROCESO" itemValue="02" />
                                                    <f:selectItem itemLabel="RESUELTO" itemValue="03" />

                                                </p:selectOneMenu>
                                                <h:message for="estadodocumento" showDetail="false" showSummary="true"/>     
                                            </h:panelGroup>
                                        </h:panelGrid>   


                                        <h:outputText value="#{msg.LabelAnotacion}"  style="margin-right:30px;"/>
                                        <h:panelGroup>

                                            <p:inputTextarea rows="3" cols="41" counter="contador" maxlength="250"

                                                             required="true" requiredMessage="#{msg.labelObligatorio}" autoResize="true" id="anotacion"
                                                             counterTemplate="{0} #{msg.LabelContador}" value="#{Beans_DefensaCivil_Certificado.objFinalizarExpedienteIpse.anotacion}">
                                            </p:inputTextarea> 
                                            <br />

                                            <h:outputText id="contador"/>    

                                            <h:message for="anotacion" showDetail="false" showSummary="true"/>                                    
                                        </h:panelGroup>



                                        <h:outputText value="#{msg.LabelArea}"  style="margin-right:30px;"/>

                                        <h:panelGrid columns="2" style="margin-bottom:30px" cellpadding="5">
                                            <h:panelGroup>                            
                                                <p:selectOneMenu effect="fade"
                                                                 filter="true"  filterMatchMode="contains"
                                                                 required="true" id="areafinal"
                                                                 validatorMessage="#{msg.labelValidar}"
                                                                 requiredMessage="#{msg.labelObli}" value="#{Beans_DefensaCivil_Certificado.objFinalizarExpedienteIpse.area_final}">

                                                    <f:selectItem itemLabel="#{msg.labelSeleccionar}" itemValue="O"/> 

                                                    <f:selectItem itemLabel="SUB GERENCIA DE DEFENSA CIVIL" itemValue="016" />
                                                    <f:selectItem itemLabel="SUB GERENCIA DE PROMOCION EMPRESARIAL" itemValue="007" />


                                                </p:selectOneMenu>
                                                <h:message for="areafinal1" showDetail="false" showSummary="true"/>     
                                            </h:panelGroup>
                                        </h:panelGrid>   



                                        <h:outputText value="#{msg.labelFolio}"  style="margin-right:30px;"/>
                                        <h:panelGroup>

                                            <p:inputText id="Exp"  required="true" requiredMessage="#{msg.labelObli}" size="5" disabled="false"
                                                         maxlength="30" validatorMessage="#{msg.labelValidar}"  
                                                         value="#{Beans_DefensaCivil_Certificado.objFinalizarExpedienteIpse.total_folios}"
                                                         >  
                                                <f:validateLength minimum="0" maximum="250"/>
                                            </p:inputText>

                                            <h:message for="Exp" showDetail="false" showSummary="true"/>                                    
                                        </h:panelGroup>


                                        <h:outputText value="#{msg.LabelUsuarioModificacion}"  style="margin-right:30px;"/>
                                        <h:panelGroup>

                                            <p:inputText id="usuario_modificacion"  required="true" requiredMessage="#{msg.labelObligatorio}" size="20" disabled="true"
                                                         maxlength="30" validatorMessage="#{msg.labelValidar}"  
                                                         value="#{Beans_DefensaCivil_Certificado.objFinalizarExpedienteIpse.usuario_modificacion}"
                                                         >  
                                                <f:validateLength minimum="0" maximum="250"/>
                                            </p:inputText>

                                            <h:message for="usuario_modificacion" showDetail="false" showSummary="true"/>                                    
                                        </h:panelGroup>



                                        <h:outputText value="#{msg.LabelNumeroRegistro}"  style="margin-right:30px;"/>
                                        <h:panelGroup>

                                            <p:inputText id="numero_registro"  required="true" requiredMessage="#{msg.labelObligatorio}" size="20" disabled="false"
                                                         maxlength="30" validatorMessage="#{msg.labelValidar}" 
                                                         value="#{Beans_DefensaCivil_Certificado.objFinalizarExpedienteIpse.numero_registro}"
                                                         >  
                                                <f:validateLength minimum="0" maximum="250"/>
                                            </p:inputText>

                                            <h:message for="numero_registro" showDetail="false" showSummary="true"/>                                    
                                        </h:panelGroup>


                                        <h:outputText value="#{msg.LabelObservaciones}"  style="margin-right:30px;"/>
                                        <h:panelGroup>

                                            <p:inputTextarea rows="3" cols="41" counter="contador_01" maxlength="300"

                                                             required="true" requiredMessage="#{msg.labelObligatorio}" autoResize="true" id="observaciones"
                                                             counterTemplate="{0} #{msg.LabelContador}" 
                                                             value="#{Beans_DefensaCivil_Certificado.objFinalizarExpedienteIpse.observaciones}">
                                            </p:inputTextarea> 
                                            <br />

                                            <h:outputText id="contador_01"/>    

                                            <h:message for="observaciones" showDetail="false" showSummary="true"/>                                    
                                        </h:panelGroup>
                                    </h:panelGrid>


                                    <br>
                                    </br>

                                    <h:panelGrid columns="3"  cellpadding="3"  cellspacing="6"  styleClass="panelColumns" columnClasses="labelOT, valueOT"  >

                                        <p:commandButton icon="ui-icon-triangle-1-w"  id="cancelEdit"
                                                         actionListener="#{Beans_DefensaCivil_Certificado.desactivaTabResolverIpse()}" 
                                                         immediate="true"  value="#{msg.labelCancelar}"  
                                                         async="true" update=":CertificadoTabView, :CertificadoTabView:form_Resolver_Documento" />


                                        <p:commandButton id="btnresolver" icon="ui-icon-folder-open" 
                                                         actionListener="#{Beans_DefensaCivil_Certificado.doResolverExpediente()}"  
                                                         value="#{msg.btnResolver}"  
                                                         update=":CertificadoTabView,:CertificadoTabView:form_Resolver_Documento, estModDocumentos"> 

                                            <p:confirm message="Desea Finalizar Expediente Ipse?" header="Aviso"  icon="ui-icon-alert"/>
                                        </p:commandButton>

                                        <p:confirmDialog global="true" styleClass="tamaño_fuente">

                                            <p:commandButton value="Si" type="button" icon="ui-icon-check" styleClass="ui-confirmdialog-yes"/>
                                            <p:commandButton value="No" type="button" icon="ui-icon-close" styleClass="ui-confirmdialog-no"/>
                                        </p:confirmDialog>

                                    </h:panelGrid>  

                                    <p:blockUI block="resolverExpediente" trigger="cancelEdit">                                               
                                        Cancelando la Actualización ... <br />
                                        <p:graphicImage value="resources/imagenes/cargando.gif" />   
                                    </p:blockUI>

                                    <p:blockUI block="resolverExpediente" trigger="btnresolver">                                               
                                        Actualizando... <br />
                                        <p:graphicImage value="resources/imagenes/cargando.gif" />   
                                    </p:blockUI>



                                </p:panel>
                                <br>
                                </br>
                            </h:form>
                        </center>
                    </p:tab>                  
                    <p:tab id="tab_informacion_virtual" title="Archivos Virtuales" titletip="Informacion_virtual" 
                           titleStyleClass="tamaño_fuente_tab" disabled="#{Beans_DefensaCivil_Certificado.bandMod}">

                        <h:form  id="form_buscar_informacion_virtual" class="border_titulo1"  styleClass="tamaño_fuente">    
                            <p:growl globalOnly="true"  id="growl_informacion_virtual" sticky="false"  showDetail="true"  />    
                            <p:panel id="panel_informacion_virtual" header="#{msg.LabelCertificado}">

                                <br>
                                </br>
                                <center>
                                    <h:panelGrid columns="2"  >
                                        <h:outputText value="#{msg.LabelCodigoRecurrente}"  styleClass="tamaño_fuente" />
                                        <h:panelGroup>

                                            <p:inputText  id="codigo_recurrente" value="#{Beans_DefensaCivil_Certificado.objBuscarArchivoVirtual.objPersona.codigo_contribuyente}"
                                                          >  
                                            </p:inputText>
                                            <h:message for="codigo_recurrente" showDetail="false" showSummary="true"/>                                    
                                        </h:panelGroup>

                                    </h:panelGrid>               
                                    <!--BLOC-->
                                </center>
                                <br>
                                </br>
                                <h:panelGrid columns="4"  cellpadding="3"  cellspacing="3"  width="17%" >
                                    <p:commandButton icon="ui-icon-triangle-1-w"  id="cancelar_editar"
                                                     actionListener="#{Beans_DefensaCivil_Certificado.desactivaVistaConsultaArchivos}" 
                                                     immediate="true"  value="#{msg.labelCancelar}"  
                                                     async="true" update=":CertificadoTabView, :CertificadoTabView:form_buscar_informacion_virtual" />
                                    <p:commandButton id="saveBtnINI" icon="ui-icon-document" actionListener="#{Beans_DefensaCivil_Certificado.doiniciarBusquedaArchivoVirtual()}"  
                                                     value="#{msg.labelNuevo}"  async="true" update="panel_informacion_virtual" />

                                    <p:commandButton id="saveBtn" icon="ui-icon-folder-open" actionListener="#{Beans_DefensaCivil_Certificado.doBuscarArchivoVirtual()}"  
                                                     value="#{msg.btnConsultar}"  async="true" update="panel_informacion_virtual" />  

                                </h:panelGrid>
                                <p:blockUI block="panel_informacion_virtual" trigger="saveBtn">   Buscando... <br />
                                    <p:graphicImage value="resources/imagenes/cargando1.gif" />   
                                </p:blockUI>
                                <center>
                                    <h:panelGrid columns="2" >
                                        <h:outputText styleClass="etiqueta_resultBusq" value="#{msg.labelCantidad}"/>
                                        <h:outputText styleClass="etiqueta_resultBusq" value="#{Beans_DefensaCivil_Certificado.arrBusArchivoVirtual.size()}"/>               
                                    </h:panelGrid> 

                                    <h:panelGrid columns="1"   cellpadding="0"  cellspacing="0" 
                                                 border="0"  styleClass="width-table"> 

                                        <p:dataTable id="table_informacion_virtual" value="#{Beans_DefensaCivil_Certificado.arrBusArchivoVirtual}" 
                                                     var="Lista_Informacion_virtual"  styleClass="order-table" paginator="true"
                                                     selectionMode="multiple" 
                                                     rowKey="#{Lista_Informacion_virtual.objDownload.id_legajo}" 
                                                     selection="#{Beans_DefensaCivil_Certificado.variable_descarga}" 
                                                     rows="5"  rowsPerPageTemplate="5,10,15,20,25,30,50" 
                                                     paginatorPosition="both" paginatorAlwaysVisible="true"
                                                     rowStyleClass="tamaño_fuente" >


                                            <f:facet name="header">
                                                <p:panelGrid columns="2">
                                                    Archivos Vistuales Guardados
                                                    <p:column style="width:150px;text-align: center">
                                                        <!-- <p:commandButton value="Visualizar" actionListener="{beans_DefensaCivil_Download.ver_download()}" ajax="false"/> -->
                                                        <p:commandButton process="table_informacion_virtual" 
                                                                         value="Descargar" 
                                                                         actionListener="#{Beans_DefensaCivil_Certificado.descarga_Archivo_Virtual}" 
                                                                         ajax="false"/> 
                                                    </p:column> 

                                                </p:panelGrid>
                                            </f:facet>


                                            <p:column style="width:90px;text-align: center">
                                                <f:facet name="header">
                                                    <h:outputText value="#{msg.labelExpediente}" />
                                                </f:facet>
                                                <h:outputText  value="#{Lista_Informacion_virtual.nro_expediente}"/>
                                            </p:column> 

                                            <p:column style="width:150px;text-align: center">
                                                <f:facet name="header">
                                                    <h:outputText value="#{msg.LabelArchivosDigitales}" />
                                                </f:facet>
                                                <h:outputText  value="#{Lista_Informacion_virtual.objDownload.nombre_archivo}" />
                                            </p:column>  

                                            <p:column style="width:90px;text-align: center" rendered="false">
                                                <f:facet name="header">
                                                    <h:outputText value="#{msg.labelFecDoc}" />
                                                </f:facet>
                                                <h:outputText  value="#{Lista_Informacion_virtual.objDownload.id_legajo}"/>
                                            </p:column> 


                                        </p:dataTable>    
                                    </h:panelGrid>  
                                </center>
                            </p:panel>  
                        </h:form>       
                    </p:tab>




                </p:tabView>
            </ui:define>
        </ui:composition>
    </h:body>
</html>
